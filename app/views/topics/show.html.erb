<h1>Show Topic</h1>

<h1><%=@topic.name%></h1>

 <div class="pull-right">
    <%=link_to("Edit Topic", edit_topic_path(@topic.id), class: "btn btn-success")%>
    <%=link_to("Delete Topic", "/topics/#{@topic.id}", method: :delete, class: "btn btn-danger", data: {confirm: "Are you sure you want to delete this topic? \nDeleting this topic will delete all its posts and comments!"})%>
</div>



<!--show every post associated with that topic-->
<div class="row">
   <div class="col-md-8">
        <p class="lead"><%=@topic.description%></p>
       
        <hr style="width: 100%; color: black; height: 1px; background-color:black;" />
        
        <h2>Posts</h2>
        
        <%@topic.posts.each do |post|%>
            <div class="media">
                <div class="media-body">
                    <h4 class="media-heading">
                        <%=link_to(post.title, topic_post_path(@topic.id, post.id)) %>
                    </h4>

                    <small>
                        Submitted <%=time_ago_in_words(post.created_at)%> ago <br>
                        <%=post.comments.size%> Comments
                    </small>
                
                </div>
            </div>
        <%end%>
    <div>
    
    <br>
    
    <div class="col-md-4">
        <%=link_to("New Post", new_topic_post_path(@topic.id), class: "btn btn-success")%> <!--arg is assigned to :topics_id param in URL this means any new post can be associated with the topic id found in :topic_id-->
    </div>
</div>
    
    <!--SPONSORED POSTS DISPLAY BEGINS-->

<div class="row">
    <div class="col-md-8">
        <br>
        <hr style="width: 100%; color: black; height: 1px; background-color:black;" />
        

        <h2>Sponsored Posts</h2>
        
        <%@topic.sponsored_posts.each do |spost|%>
            <div class="media">
                <div class="media-body">
                    <h4 class="media-heading">
                        <%=link_to(spost.title, topic_sponsored_post_path(@topic.id, spost.id)) %>
                    </h4>

                    <small>
                        Submitted <%=time_ago_in_words(spost.created_at)%> ago <br>
                    </small>

                </div>
            </div>
        <%end%>
    <div>
    <br>
    <div class="col-md-4">
        <%=link_to("New Sponsored Post", new_topic_sponsored_post_path(@topic.id), class: "btn btn-success")%> <!--arg is assigned to :topics_id param in URL this means any new post can be associated with the topic id found in :topic_id-->
    </div>
    <br>
    <br>
    <br>
</div>